/shop/{slug}:
  get:
    tags:
      - shop
    summary: スラグによるショップ情報取得
    description: 指定したスラグを持つショップの詳細情報を取得します。エリア情報も含まれます。
    operationId: getShopBySlug
    parameters:
      - name: slug
        in: path
        required: true
        description: ショップスラッグ
        schema:
          type: string
          example: "sample-shop"
    responses:
      '200':
        description: ショップ情報取得成功
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                  description: ショップID
                name:
                  type: string
                  description: ショップ名
                slug:
                  type: string
                  description: ショップスラッグ
                email:
                  type: string
                  format: email
                  description: ショップのメールアドレス
                description:
                  type: string
                  description: ショップの説明
                phone:
                  type: string
                  description: 電話番号
                address:
                  type: string
                  description: 住所
                areaId:
                  type: integer
                  description: エリアID
                area:
                  type: object
                  properties:
                    id:
                      type: integer
                      description: エリアID
                    name:
                      type: string
                      description: エリア名
                    parentId:
                      type: integer
                      description: 親エリアID
                  required: [id, name, parentId]
                  description: エリア情報
                status:
                  type: string
                  description: ショップステータス
                  enum: [active, inactive, pending]
                createdAt:
                  type: string
                  format: date-time
                  description: 作成日時
                updatedAt:
                  type: string
                  format: date-time
                  description: 更新日時
              required: [id, name, slug, areaId, area]
      '404':
        description: ショップが見つかりません
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "リソースが見つかりません"
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'

/shop:
  get:
    tags:
      - shop
    summary: 自分のショップ情報取得
    description: 認証済みユーザーが自分のショップの詳細情報を取得します。エリア情報も含まれます。
    operationId: getMyShop
    security:
      - bearerAuth: []
    responses:
      '200':
        description: ショップ情報取得成功
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                  description: ショップID
                name:
                  type: string
                  description: ショップ名
                slug:
                  type: string
                  description: ショップスラッグ
                email:
                  type: string
                  format: email
                  description: ショップのメールアドレス
                description:
                  type: string
                  description: ショップの説明
                phone:
                  type: string
                  description: 電話番号
                address:
                  type: string
                  description: 住所
                areaId:
                  type: integer
                  description: エリアID
                area:
                  type: object
                  properties:
                    id:
                      type: integer
                      description: エリアID
                    name:
                      type: string
                      description: エリア名
                    parentId:
                      type: integer
                      description: 親エリアID
                  required: [id, name, parentId]
                  description: エリア情報
                status:
                  type: string
                  description: ショップステータス
                  enum: [active, inactive, pending]
                createdAt:
                  type: string
                  format: date-time
                  description: 作成日時
                updatedAt:
                  type: string
                  format: date-time
                  description: 更新日時
              required: [id, name, slug, areaId, area]
      '404':
        description: ショップが見つかりません
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "ショップが見つかりません。サポートにお問い合わせください"
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'
  put:
    tags:
      - shop
    summary: 自分のショップ情報更新
    description: 認証済みユーザーが自分のショップの情報を更新します。
    operationId: updateMyShop
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                description: ショップ名
              description:
                type: string
                description: ショップの説明
              logo:
                type: string
                description: ロゴ画像URL
              coverImage:
                type: string
                description: カバー画像URL
              openingHours:
                type: string
                description: 営業時間
              postalCode:
                type: string
                description: 郵便番号
              prefecture:
                type: string
                description: 都道府県
              city:
                type: string
                description: 市区町村
              streetAddress:
                type: string
                description: 番地・街区
              buildingName:
                type: string
                description: 建物名・部屋番号
              customizations:
                type: object
                description: カスタマイズ設定
              googleMapsLink:
                type: string
                description: GoogleマップURL
              googleMapsEmbedSrc:
                type: string
                description: Googleマップ埋め込みURL
    responses:
      '200':
        description: ショップ情報更新成功
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "ショップ情報を更新しました"
                shop:
                  type: object
                  properties:
                    id:
                      type: integer
                      description: ショップID
                    name:
                      type: string
                      description: ショップ名
                    description:
                      type: string
                      description: ショップの説明
                    logo:
                      type: string
                      description: ロゴ画像URL
                    coverImage:
                      type: string
                      description: カバー画像URL
                    openingHours:
                      type: string
                      description: 営業時間
                    postalCode:
                      type: string
                      description: 郵便番号
                    prefecture:
                      type: string
                      description: 都道府県
                    city:
                      type: string
                      description: 市区町村
                    streetAddress:
                      type: string
                      description: 番地・街区
                    buildingName:
                      type: string
                      description: 建物名・部屋番号
                    customizations:
                      type: object
                      description: カスタマイズ設定
                    googleMapsLink:
                      type: string
                      description: GoogleマップURL
                    googleMapsEmbedSrc:
                      type: string
                      description: Googleマップ埋め込みURL
                    createdAt:
                      type: string
                      format: date-time
                      description: 作成日時
                    updatedAt:
                      type: string
                      format: date-time
                      description: 更新日時
              required: [message, shop]
      '404':
        description: ショップが見つかりません
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "ショップが見つかりません"
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'

/admin/shop/{id}:
  put:
    tags:
      - shop
    summary: ショップ情報更新（ID指定）
    description: 指定したIDのショップ情報を更新します。
    operationId: updateShop
    parameters:
      - name: id
        in: path
        required: true
        description: ショップID
        schema:
          type: integer
          example: 1
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              name:
                type: string
                description: ショップ名
              description:
                type: string
                description: ショップの説明
              logo:
                type: string
                description: ロゴ画像URL
              coverImage:
                type: string
                description: カバー画像URL
              openingHours:
                type: string
                description: 営業時間
              postalCode:
                type: string
                description: 郵便番号
              prefecture:
                type: string
                description: 都道府県
              city:
                type: string
                description: 市区町村
              streetAddress:
                type: string
                description: 番地・街区
              buildingName:
                type: string
                description: 建物名・部屋番号
              customizations:
                type: object
                description: カスタマイズ設定
    responses:
      '200':
        description: ショップ情報更新成功
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "ショップ情報を更新しました"
                shop:
                  type: object
                  properties:
                    id:
                      type: integer
                      description: ショップID
                    name:
                      type: string
                      description: ショップ名
                    description:
                      type: string
                      description: ショップの説明
                    logo:
                      type: string
                      description: ロゴ画像URL
                    coverImage:
                      type: string
                      description: カバー画像URL
                    openingHours:
                      type: string
                      description: 営業時間
                    postalCode:
                      type: string
                      description: 郵便番号
                    prefecture:
                      type: string
                      description: 都道府県
                    city:
                      type: string
                      description: 市区町村
                    streetAddress:
                      type: string
                      description: 番地・街区
                    buildingName:
                      type: string
                      description: 建物名・部屋番号
                    customizations:
                      type: object
                      description: カスタマイズ設定
                    createdAt:
                      type: string
                      format: date-time
                      description: 作成日時
                    updatedAt:
                      type: string
                      format: date-time
                      description: 更新日時
              required: [message, shop]
      '404':
        description: ショップが見つかりません
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "ショップが見つかりません"
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'
  delete:
    tags:
      - shop
    summary: ショップ削除（ID指定）
    description: 指定したIDのショップを削除します。
    operationId: deleteShop
    parameters:
      - name: id
        in: path
        required: true
        description: ショップID
        schema:
          type: integer
          example: 1
    security:
      - bearerAuth: []
    responses:
      '200':
        description: ショップ削除成功
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "ショップを削除しました"
              required: [message]
      '404':
        description: ショップが見つかりません
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "ショップが見つかりません"
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'
  post:
    tags:
      - shop
    summary: ショップレビュー投稿・更新
    description: 指定したショップにレビューを投稿または更新します。既存のレビューがある場合は更新されます。
    operationId: upsertShopReview
    parameters:
      - name: id
        in: path
        required: true
        description: ショップID
        schema:
          type: integer
          example: 1
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              rating:
                type: number
                minimum: 1
                maximum: 5
                description: 評価（1-5）
                example: 4.5
              comment:
                type: string
                description: レビューコメント
                example: "とても良いショップでした。"
            required: [rating]
    responses:
      '201':
        description: レビュー投稿・更新成功
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "レビューを投稿しました"
                review:
                  type: object
                  properties:
                    id:
                      type: integer
                      description: レビューID
                    rating:
                      type: number
                      description: 評価
                    comment:
                      type: string
                      description: レビューコメント
                    shopId:
                      type: integer
                      description: ショップID
                    userId:
                      type: integer
                      description: ユーザーID
                    createdAt:
                      type: string
                      format: date-time
                      description: 作成日時
                    updatedAt:
                      type: string
                      format: date-time
                      description: 更新日時
              required: [message, review]
      '404':
        description: ショップが見つかりません
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "Shop not found"
      '500':
        description: サーバーエラー
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: "Internal server error"
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'