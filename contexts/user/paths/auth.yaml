/auth/signup:
  post:
    tags:
      - auth
    summary: ユーザー登録
    description: 新規ユーザーアカウントを作成します。
    operationId: signup
    security: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/auth.yaml#/components/schemas/SignupRequest'
    responses:
      '201':
        description: 登録成功
        content:
          application/json:
            schema:
              $ref: '../schemas/auth.yaml#/components/schemas/SignupResponse'
      '400':
        $ref: '../../../shared/responses/common.yaml#/components/responses/BadRequest'

/auth/verify-email:
  post:
    tags:
      - auth
    summary: メール認証
    description: メールに送信された認証トークンを使用してメールアドレスを認証します。
    operationId: verifyEmail
    security: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/auth.yaml#/components/schemas/VerifyEmailRequest'
    responses:
      '200':
        description: メール認証成功
        content:
          application/json:
            schema:
              $ref: '../schemas/auth.yaml#/components/schemas/VerifyEmailResponse'
      '400':
        $ref: '../../../shared/responses/common.yaml#/components/responses/BadRequest'
      '404':
        $ref: '../../../shared/responses/common.yaml#/components/responses/NotFound'

/auth/resend-verification:
  post:
    tags:
      - auth
    summary: 認証メール再送信
    description: メール認証用のメールを再送信します。
    operationId: resendVerificationEmail
    security: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/auth.yaml#/components/schemas/ResendVerificationRequest'
    responses:
      '200':
        description: 再送信成功
        content:
          application/json:
            schema:
              $ref: '../schemas/auth.yaml#/components/schemas/ResendVerificationResponse'
      '400':
        $ref: '../../../shared/responses/common.yaml#/components/responses/BadRequest'
      '429':
        $ref: '../../../shared/responses/common.yaml#/components/responses/TooManyRequests'

/auth/login:
  post:
    tags:
      - auth
    summary: ログイン
    description: メールアドレスとパスワードでログインします。
    operationId: login
    security: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: '../schemas/auth.yaml#/components/schemas/LoginRequest'
    responses:
      '200':
        description: ログイン成功
        content:
          application/json:
            schema:
              $ref: '../schemas/auth.yaml#/components/schemas/LoginResponse'
            examples:
              successWithUser:
                summary: ログイン成功（ユーザー情報付き）
                value:
                  name: 山田太郎
                  email: yamada@example.com
                  role: user
                  organization:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    name: 株式会社Example
                  subscription:
                    id: 987fcdeb-51a2-43f1-b67e-5cde3210fedc
                    name: スタンダードプラン
                    price: 5000
                    maxItems: 100
                    usedItems: 25
                    itemPriceLimit: 50000
                    description: 中規模事業者向けプラン
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'

/auth/logout:
  post:
    tags:
      - auth
    summary: ログアウト
    description: 現在のセッションからログアウトします。
    operationId: logout
    security:
      - bearerAuth: []
    responses:
      '200':
        description: ログアウト成功
        content:
          application/json:
            schema:
              $ref: '../schemas/auth.yaml#/components/schemas/LogoutResponse'
      '401':
        $ref: '../../../shared/responses/common.yaml#/components/responses/Unauthorized'
