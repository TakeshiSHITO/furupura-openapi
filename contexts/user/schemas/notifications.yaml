components:
  schemas:
    NotificationSettings:
      type: object
      required:
        - userId
      properties:
        userId:
          type: integer
          format: int64
          description: ユーザーID
        email_notifications:
          $ref: '#/components/schemas/EmailNotificationSettings'
        push_notifications:
          $ref: '#/components/schemas/PushNotificationSettings'
        sms_notifications:
          $ref: '#/components/schemas/SmsNotificationSettings'
        line_notifications:
          $ref: '#/components/schemas/LineNotificationSettings'
        quiet_hours:
          $ref: '#/components/schemas/QuietHours'

    EmailNotificationSettings:
      type: object
      properties:
        enabled:
          type: boolean
          default: true
          description: メール通知の有効/無効
        order_updates:
          type: boolean
          default: true
          description: 注文状況の更新
        shipping_updates:
          type: boolean
          default: true
          description: 配送状況の更新
        promotions:
          type: boolean
          default: true
          description: プロモーション・セール情報
        price_alerts:
          type: boolean
          default: false
          description: 価格変動アラート
        stock_alerts:
          type: boolean
          default: false
          description: 在庫復活アラート
        newsletter:
          type: boolean
          default: false
          description: ニュースレター
        points_expiry:
          type: boolean
          default: true
          description: ポイント失効通知
        account_security:
          type: boolean
          default: true
          description: アカウントセキュリティ通知

    PushNotificationSettings:
      type: object
      properties:
        enabled:
          type: boolean
          default: false
          description: プッシュ通知の有効/無効
        order_updates:
          type: boolean
          default: true
          description: 注文状況の更新
        shipping_updates:
          type: boolean
          default: true
          description: 配送状況の更新
        promotions:
          type: boolean
          default: false
          description: プロモーション・セール情報
        price_alerts:
          type: boolean
          default: false
          description: 価格変動アラート
        in_app_messages:
          type: boolean
          default: true
          description: アプリ内メッセージ
        chat_messages:
          type: boolean
          default: true
          description: チャットメッセージ

    SmsNotificationSettings:
      type: object
      properties:
        enabled:
          type: boolean
          default: false
          description: SMS通知の有効/無効
        order_confirmation:
          type: boolean
          default: false
          description: 注文確認
        shipping_updates:
          type: boolean
          default: false
          description: 配送状況の更新
        delivery_alerts:
          type: boolean
          default: false
          description: 配達完了通知
        security_alerts:
          type: boolean
          default: true
          description: セキュリティアラート

    LineNotificationSettings:
      type: object
      properties:
        enabled:
          type: boolean
          default: false
          description: LINE通知の有効/無効
        lineId:
          type: string
          description: 連携済みLINE ID
        order_updates:
          type: boolean
          default: true
          description: 注文状況の更新
        shipping_updates:
          type: boolean
          default: true
          description: 配送状況の更新
        promotions:
          type: boolean
          default: false
          description: プロモーション情報

    QuietHours:
      type: object
      properties:
        enabled:
          type: boolean
          default: false
          description: 通知制限時間の有効/無効
        start_time:
          type: string
          pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
          example: '22:00'
          description: 開始時刻
        end_time:
          type: string
          pattern: '^([01]?[0-9]|2[0-3]):[0-5][0-9]$'
          example: '07:00'
          description: 終了時刻
        timezone:
          type: string
          default: 'Asia/Tokyo'
          description: タイムゾーン

    Notification:
      type: object
      required:
        - notificationId
        - userId
        - type
        - title
      properties:
        notificationId:
          type: string
          format: uuid
        userId:
          type: integer
          format: int64
        type:
          type: string
          enum:
            - order
            - shipping
            - promotion
            - price_alert
            - stock_alert
            - points
            - security
            - system
          description: 通知タイプ
        title:
          type: string
          description: 通知タイトル
        message:
          type: string
          description: 通知メッセージ
        actionUrl:
          type: string
          format: uri
          description: アクションURL
        imageUrl:
          type: string
          format: uri
          description: 画像URL
        isRead:
          type: boolean
          default: false
          description: 既読フラグ
        readAt:
          type: string
          format: date-time
          description: 既読日時

    UpdateNotificationSettingsRequest:
      type: object
      properties:
        emailNotifications:
          $ref: '#/components/schemas/EmailNotificationSettings'
        pushNotifications:
          $ref: '#/components/schemas/PushNotificationSettings'
        smsNotifications:
          $ref: '#/components/schemas/SmsNotificationSettings'
        lineNotifications:
          $ref: '#/components/schemas/LineNotificationSettings'
        quietHours:
          $ref: '#/components/schemas/QuietHours'

    MarkNotificationAsReadRequest:
      type: object
      required:
        - notificationIds
      properties:
        notificationIds:
          type: array
          items:
            type: string
            format: uuid
          description: 既読にする通知ID
