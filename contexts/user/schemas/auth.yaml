components:
  schemas:
    SignupRequest:
      type: object
      required:
        - email
        - password
        - name
      properties:
        name:
          type: string
          maxLength: 100
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          minLength: 8
      example:
        name: ふるぷら太郎
        email: yamada@furupura.jp
        password: SecurePass123!

    SignupResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: 登録成功メッセージ
      example:
        message: ユーザー登録が完了しました。メールアドレスに確認メールを送信しました。

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
      example:
        email: yamada@example.com
        password: SecurePass123!

    VerifyEmailRequest:
      type: object
      required:
        - userId
        - token
      properties:
        userId:
          type: integer
          format: int64
          description: ユーザーID
        token:
          type: string
          description: メール認証トークン

    VerifyEmailResponse:
      type: object
      required:
        - message
        - verified
      properties:
        message:
          type: string
          description: 認証結果メッセージ
        verified:
          type: boolean
          description: 認証成功フラグ

    ResendVerificationRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          description: 認証メールを再送信するメールアドレス

    ResendVerificationResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: 再送信結果メッセージ

    LoginResponse:
      type: object
      required:
        - name
        - email
        - role
      properties:
        name:
          type: string
          description: ユーザー名
        email:
          type: string
          format: email
          description: メールアドレス
        role:
          type: string
          enum: [user]
          description: ユーザーロール
        organization:
          type: object
          properties:
            organizationId:
              type: string
              format: uuid
              description: 組織ID
            name:
              type: string
              description: 組織名
          description: 所属組織情報（nullable）
        subscription:
          type: object
          properties:
            subscriptionId:
              type: string
              format: uuid
              description: サブスクリプションID
            name:
              type: string
              description: プラン名
            price:
              type: number
              description: 月額料金
            maxItems:
              type: integer
              description: 最大アイテム数
            usedItems:
              type: integer
              description: 使用済みアイテム数
            itemPriceLimit:
              type: number
              description: アイテム価格上限
            description:
              type: string
              description: プランの説明
          description: 現在のサブスクリプション情報（nullable）
      example:
        name: 山田太郎
        email: yamada@example.com
        role: user
        organization:
          organizationId: 123e4567-e89b-12d3-a456-426614174000
          name: 株式会社Example
        subscription:
          subscriptionId: 987fcdeb-51a2-43f1-b67e-5cde3210fedc
          name: スタンダードプラン
          price: 5000
          maxItems: 100
          usedItems: 25
          itemPriceLimit: 50000
          description: 中規模事業者向けプラン

    AuthResponse:
      type: object
      required:
        - access_token
        - refresh_token
        - expires_in
      properties:
        access_token:
          type: string
        refresh_token:
          type: string
        expires_in:
          type: integer
          description: アクセストークンの有効期限（秒）
        user:
          $ref: './user.yaml#/components/schemas/UserProfile'
      example:
        access_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        refresh_token: 7a5f2c4e-8b1d-4e6f-9c3a-1d7e9f5b3a8c
        expires_in: 3600
        user:
          id: 1234567890123456789
          email: yamada@example.com
          name: 山田太郎

    LogoutResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: ログアウト成功メッセージ
      example:
        message: ログアウトに成功しました
